datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["relationJoins"]
}

model Country {
  id   Int    @id @default(autoincrement())
  name String @unique @db.VarChar(100)
  hero Hero[]
}

model Hero {
  id        Int         @id @default(autoincrement())
  civilName String      @db.VarChar(100)
  heroName  String      @unique @db.VarChar(100)
  age       Int
  team      String?     @db.VarChar(100)
  country   Country     @relation(fields: [countryId], references: [id], onDelete: Cascade)
  //obrigatorio
  countryId Int         @default(1)
  powers    heroPower[]
  //relacionamento um para muitos com missões (uma missão pode ter vários heróis)
  missions  Mission?    @relation(fields: [missionId], references: [id], onDelete: Cascade)
  missionId Int?
}

model power {
  id          Int         @id @default(autoincrement())
  name        String      @unique @db.VarChar(100)
  description String      @db.VarChar(255)
  heroes      heroPower[]
}

model heroPower {
  hero    Hero  @relation(fields: [heroId], references: [id], onDelete: Cascade)
  heroId  Int
  power   power @relation(fields: [powerId], references: [id], onDelete: Cascade)
  powerId Int

  @@id([heroId, powerId])
}

model Mission {
  id          Int      @id @default(autoincrement())
  name        String   @db.VarChar(255)
  duration    DateTime
  description String   @db.VarChar(255)
  hero        Hero[]
}
